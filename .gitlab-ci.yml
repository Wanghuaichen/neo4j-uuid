include:
  - project: graphaware/devops/gitlab-ci-templates
    file: gitlab-ci-templates.yml

stages:
  - deploy
  - postDeploy


bumpVersion:
  extends: .frameworkVersionBump
  stage: deploy

uploadArtifact:
  extends: .uploadToS3
  stage: postDeploy
  dependencies:
    - bumpVersion
  variables:
    JAR_NAME: uuid
  only:
    refs:
      - master
    variables:
      - $PARENT_VERSION

trigger:
  stage: postDeploy
  trigger: GraphAware/neo4j-plugins/neo4j-to-elasticsearch
  variables:
    PARENT_VERSION: $PARENT_VERSION
  only:
    refs:
      - master
    variables:
      - $PARENT_VERSION